<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/normalize.css">
    <link rel="stylesheet" href="./styles/forms_css/forms.css">
    <title>Form</title>
</head>
<body>
    <div id="wrapper" class="wrapper">
        <div class="header">
            <h3>Ask a question</h3>
            <div class="header__exit">
                <a href="#"><img src="./assets/forms_img/form_exit.svg" alt="Exit"></a>
            </div>
        </div>
    <div class="forms">
        <form action="#thanks">
            <div class="forms__item">
                <input id="name" class="forms__input" type="text" placeholder="Name">
            </div>
            <div class="forms__item">
                <input  id="phone" class="forms__input" type="tel" name="tel" placeholder="Phone Number*" required="required">
            </div>
            <div class="forms__item">
                <input  id="email" class="forms__input" type="email" name="email" placeholder="Email*" required="required">
            </div>
            <div class="forms__item">
                <input  id="service" class="forms__input" type="text" placeholder="Interested Product/Service">
            </div>
            <div class="forms__item">
                <textarea  id="message" class="forms__input forms__textarea" name="textarea" cols="30" rows="20" placeholder="Message*" required="required"></textarea>
            </div>
            <div class="forms__item">
                <input class="forms__checkbox" type="checkbox" id="agree" name="checkbox" checked="checked">
                <label class="forms__label" for="agree"><p>By submitting an application you agree to the privacy policy</p></label>
            </div>
            <div>
                <input id="button_submit" class="forms__button" type="submit" value="Submit">
            </div>
        </form>
    </div>
    </div>
        <div id="thanks" class="thanks">
            <div class="thanks__box">
                <div class="thanks__exit">
                    <a href="#wrapper"><img src="./assets/forms_img/thank_exit.svg" alt="Exit"></a>
                </div>
                <div class="thanks_img">
                    <img src="./assets/forms_img/success.png" alt="Thanks">
                </div>
                <h3>Thank you!</h3>
                <span class="thanks__text">Your message has been sent, we will contact you shortly</span>
                <div class="forms__button thanks__button">
                    <a href="#wrapper">return back</a>
                </div>
            </div>
        </div>
    <script>
        let errors = [];
function checkValidity(input) {
    let validity = input.validity;

    if (validity.patternMismatch) 
		{ errors.push('Неверный формат заполнения'); }
    
		if (validity.rangeOverflow) 
		{ let max = input.max;
			errors.push('Максимальное значение не может быть больше чем ' + max); }
    
		if (validity.rangeUnderflow) 
		{ let min = input.min;
			errors.push('Минимальное значение не может быть больше чем ' + min); }
}

//Проверка для всех полей
function checkAll() {
		//получаем все инпуты
    let inputs = document.querySelectorAll("input");

		//перебираем их и на каждый вызываем функцию валидации
    for (let input of inputs) {
        checkValidity(input);
    }

		//выводим ошибки в div 
    let errorDiv = document.querySelector('.errorsInfo');
    errorDiv.innerHTML = errors.join('. \n');
}
const button = document.querySelector('#button_submit');
button.onclick=function(e){
    e.preventDefault();
    let user = {
    name: document.querySelector('#name').value,
    phone: document.querySelector('#phone').value,
    email: document.querySelector('#email').value,
    service: document.querySelector('#service').value,
    message: document.querySelector('#message').value,
    }

    fetch('https://httpbin.org/post',
    {
        method: 'POST',
        body: JSON.stringify(user),
        headers: {
            'Content-Type': 'application/json; charset=utf-8'
        },
    }).then(resp => resp.json()).then(user => {
        console.log(user);
    }).catch(error => console.log(error));

}

    </script>
</body>
</html>